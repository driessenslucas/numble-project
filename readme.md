# ChatApp

## Overview

`ChatApp` is an API that integrates with Azure's OpenAI services to provide conversational responses. The app allows users to send a message, and the backend returns a response generated by a conversational AI model. It uses Azure Key Vault to securely store and retrieve API keys and integrates with Azure OpenAI’s Chat Completion API.

## Features

- Send a message to OpenAI’s model and get a response
- Securely fetch API keys from Azure Key Vault
- OpenAI integration for chat responses
- Swagger UI for easy API testing and documentation

## Requirements

- .NET 6 or higher
- Azure Subscription (for OpenAI and Key Vault)
- Access to Azure OpenAI model (e.g., `numble-gpt`)
- Key Vault URI and secret name for OpenAI API key

## Installation

### 1. Configure your Azure settings

Ensure you have set up the following in your `appsettings.json` or environment variables:

- **Azure:OpenAIEndpoint**: The endpoint for your Azure OpenAI resource.
- **Azure:KeyVaultUri**: The URI for your Azure Key Vault instance.
- **Azure:OpenAIKeySecretName**: The name of the secret where your OpenAI API key is stored.

Example `appsettings.json`:

```json
{
  "Azure": {
    "OpenAIEndpoint": "https://your-openai-endpoint",
    "KeyVaultUri": "https://your-keyvault-name.vault.azure.net/",
    "OpenAIKeySecretName": "your-openai-api-key-secret"
  }
}
```

### 3. Build and run the project

Run the following command to build and start the application:

```bash
dotnet build
dotnet run
```

The application will be available at `https://localhost:5001`.

## API Endpoints

### `POST /api/chat`

Sends a message to OpenAI and receives a response.

#### Request body

```json
{
  "userMessage": "Hello, how are you?"
}
```

#### Response

```json
{
  "response": "I'm doing great, thank you for asking!"
}
```

#### Example cURL

```bash
curl -X POST https://localhost:5001/api/chat -H "Content-Type: application/json" -d '{"userMessage": "Hello, how are you?"}'
```

### Swagger UI

To interact with the API via Swagger UI, navigate to `https://localhost:5001/swagger` once the app is running. It provides an interactive interface to test all available endpoints.

## Error Handling

In case of errors (e.g., missing or invalid message):

- `400 Bad Request` for invalid or missing user message.
- `500 Internal Server Error` for unexpected failures (e.g., issues with fetching the OpenAI response or connecting to Azure Key Vault).
